<!doctype html>
<html>
<head>
<script src="idList.js"></script>
</head>
<body>
<h1>Test</h1>
<div id="data"></div>
<script>
    var max = 100000;
    var n = 16;
    var idlist = new idList();
    var min = Number.POSITIVE_INFINITY;
    for (var i=0; i < n; i++) {
        var id = Math.floor(1 + Math.random() * max);
        min = Math.min(min, id);
        idlist.set(id, id);
    }
    var head = idlist.getHead();
    var str = "<h2>idList (1 .. " + max + "), " + n + " values</h2><pre>";
    for (var i = _MAX_LEVEL - 1; i > -1; i--) {
        var node = head;
        str += "Level: " + i + "\t";
        while (node.next[i]) {
            var color = node.ids[i] < node.next[i].ids[i] ? 'green' : 'red';
            var id = node.ids[i] < 0 ? 'Head' : "<span style='color:" + color + "'>" + node.ids[i] + "</span>";
            str += id + "\t";
            node = node.next[i];
        }
        str += "Tail\n";
    }
    str += "</pre>";
    var item = idlist.get(min);
    var second = false;
    str += "get list from min value " + min + ": ";
    while (item.item) {
        if (item.item == min) {
            second = item.next[0].item;
        }
        var color = (!item.next[0].item || item.item < item.next[0].item) ? 'green' : 'red';
        str += " <span style='color:" + color + "'>" + item.item + "</span>";
        item = item.next[0];
    }
    item = idlist.before(min + 1);
    str += "<br>get list before min + 1 value " + (min + 1) + ": ";
    while (item.item) {
        var color = (!item.next[0].item || item.item < item.next[0].item) ? 'green' : 'red';
        str += " <span style='color:" + color + "'>" + item.item + "</span>";
        item = item.next[0];
    }

    str += "<br>get list from tail to head";
    var item = idlist.getTail();
    while (item.plainPrev.item) {
        var color = (!item.item || item.item > item.plainPrev.item) ? 'green' : 'red';
        str += " <span style='color:" + color + "'>" + item.plainPrev.item + "</span>";
        item = item.plainPrev;
    }

    if (second) {
        idlist.unset(second);
        str += "<br>list from min value after second value deleted " + second + ": ";
        item = idlist.get(min);
        while (item.item) {
            var color = (!item.next[0].item || item.item < item.next[0].item) ? 'green' : 'red';
            str += " <span style='color:" + color + "'>" + item.item + "</span>";
            item = item.next[0];
        }
    } else {
        str += "<br><span style='color:red'>Second value not founded!</span>";
    }

    str += "<br>get list from tail to head after delete second value";
    var item = idlist.getTail();
    while (item.plainPrev.item) {
        var color = (!item.item || item.item > item.plainPrev.item && item.plainPrev.item != second) ? 'green' : 'red';
        str += " <span style='color:" + color + "'>" + item.plainPrev.item + "</span>";
        item = item.plainPrev;
    }

    var el = document.getElementById("data");
    el.innerHTML = str;

function measure()
{
    var el = document.getElementById("measure");
    var el_c = document.getElementById("count");
    var count = parseInt(el_c.value);
    var str = el.innerHTML;
    var t0 = performance.now();
    var list = new chatList();
    for (var i=1; i<=count; i++) {
        var row = {id:i, chat_id:1, thread_id: 0, to_id: 0, rating: 0, status: 0, ip: "127.0.0.1", dt: new Date(), account_id: 1, meta: {message: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxdklsdskldkllllllllllllllllllllllllllllllllllllllll"}};
        list.set(row);
    }
    var time = Math.floor(performance.now() - t0);
    str += "<br>Full time generation for " + count + " hypothesis passes: " + time + " msec";
    var t0 = performance.now();
    for (var i=count+1; i<=count*2; i++) {
        var row = {id:i, chat_id:1, thread_id: i - count, to_id: i - count, rating: 0, status: 0, ip: "127.0.0.1", dt: new Date(), account_id: 1, meta: {message: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxdklsdskldkllllllllllllllllllllllllllllllllllllllll"}};
        list.set(row);
    }
    var time = Math.floor(performance.now() - t0);
    str += "<br>Full time generation for " + count + " arguments passes: " + time + " msec";
    var t0 = performance.now();
    for (var i=2*count + 1; i<=count*3; i++) {
        var row = {id:i, chat_id:1, thread_id: i - 2*count, to_id: i - count, rating: 0, status: 0, ip: "127.0.0.1", dt: new Date(), account_id: 1, meta: {message: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxdklsdskldkllllllllllllllllllllllllllllllllllllllll"}};
        list.set(row);
    }
    var time = Math.floor(performance.now() - t0);
    str += "<br>Full time generation for " + count + " comments passes: " + time + " msec";
    for (var i=1; i<=count * 3; i++) {
        var row = list.get(i);
        if (!row || row.item.id != i) {
            str += "<br>Read id: " + i + ", return : " + String(row ? row.item.id : row);
        }
    }
    var time = Math.floor(performance.now() - t0);
    str += "<br>Full time read from " + (3 * count) + " row passes: " + time + " msec";
    list = null;
    el.innerHTML = str;
}
</script>
Count for hypothesis, arguments, comments <input id="count" value="100000">
<button onclick="measure()">Start measure</button>
<div id="measure"></div>
</body>
</html>
